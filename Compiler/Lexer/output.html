 <div class="snippet"> <style scoped> * { margin: 0; padding: 0; box-sizing: border-box; font-family: monospace; } .KEYWORD { color: #45a1ce; } .IDENTIFIER { color: black; } .NUMBER { color: purple; } .OPERATOR { color: #eaaf00; } .DELIMETER { color: #0004b7; } .STRING { color: green; } .COMMENT { color: #5050ff; font-style: italic; } .UNDEF { text-decoration: underline; color: red; } .snippet { background: white; padding: 10px; display: flex; align-items: stretch; overflow: auto; } .snippet .line div::after { content: "." } .snippet .line { padding-right: 10px; height: 100%; border-right: 2px solid red; user-select: none; } pre { padding-left: 1em; } </style><div class="line"> <div>1</div> <div>2</div> <div>3</div> <div>4</div> <div>5</div> <div>6</div> <div>7</div> <div>8</div> <div>9</div> <div>10</div> <div>11</div> <div>12</div> </div><pre><span class="COMMENT">// Subesh</span>
<span class="KEYWORD">const</span> <span class="IDENTIFIER">button</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">document</span><span class="DELIMETER">.</span><span class="IDENTIFIER">getElementById</span><span class="DELIMETER">(</span><span class="STRING">"play"</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
<span class="KEYWORD">const</span> <span class="IDENTIFIER">score</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">document</span><span class="DELIMETER">.</span><span class="IDENTIFIER">getElementById</span><span class="DELIMETER">(</span><span class="STRING">"score"</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
<span class="KEYWORD">const</span> <span class="IDENTIFIER">canvas</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">document</span><span class="DELIMETER">.</span><span class="IDENTIFIER">getElementById</span><span class="DELIMETER">(</span><span class="STRING">"canvas"</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
<span class="KEYWORD">const</span> <span class="IDENTIFIER">ctx</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">canvas</span><span class="DELIMETER">.</span><span class="IDENTIFIER">getContext</span><span class="DELIMETER">(</span><span class="STRING">"2d"</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
<span class="KEYWORD">const</span> <span class="IDENTIFIER">mod</span> <span class="OPERATOR">=</span> <span class="DELIMETER">(</span><span class="IDENTIFIER">m</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">val</span><span class="DELIMETER">)</span> <span class="OPERATOR">=</span><span class="OPERATOR">></span> <span class="DELIMETER">{</span>
  <span class="KEYWORD">while</span> <span class="DELIMETER">(</span><span class="IDENTIFIER">val</span> <span class="OPERATOR"><</span> <span class="NUMBER">0</span><span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
    <span class="IDENTIFIER">val</span> <span class="OPERATOR">+</span><span class="OPERATOR">=</span> <span class="IDENTIFIER">m</span><span class="DELIMETER">;</span>
  <span class="DELIMETER">}</span>
  <span class="KEYWORD">return</span> <span class="IDENTIFIER">val</span> <span class="OPERATOR">%</span> <span class="IDENTIFIER">m</span><span class="DELIMETER">;</span>
<span class="DELIMETER">}</span><span class="DELIMETER">;</span>

<span class="KEYWORD">var</span> <span class="IDENTIFIER">state</span> <span class="OPERATOR">=</span> <span class="DELIMETER">{</span>
  <span class="IDENTIFIER">gameover</span><span class="DELIMETER">:</span> <span class="KEYWORD">true</span><span class="DELIMETER">,</span>
  <span class="IDENTIFIER">direction</span><span class="DELIMETER">:</span> <span class="NUMBER">2</span><span class="DELIMETER">,</span>
  <span class="IDENTIFIER">snake</span><span class="DELIMETER">:</span> <span class="DELIMETER">[</span>
    <span class="DELIMETER">{</span> <span class="IDENTIFIER">x</span><span class="DELIMETER">:</span> <span class="NUMBER">10</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span><span class="DELIMETER">:</span> <span class="NUMBER">10</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">direction</span><span class="DELIMETER">:</span> <span class="NUMBER">2</span> <span class="DELIMETER">}</span><span class="DELIMETER">,</span>
    <span class="DELIMETER">{</span> <span class="IDENTIFIER">x</span><span class="DELIMETER">:</span> <span class="NUMBER">10</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span><span class="DELIMETER">:</span> <span class="NUMBER">20</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">direction</span><span class="DELIMETER">:</span> <span class="NUMBER">2</span> <span class="DELIMETER">}</span><span class="DELIMETER">,</span>
    <span class="DELIMETER">{</span> <span class="IDENTIFIER">x</span><span class="DELIMETER">:</span> <span class="NUMBER">10</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span><span class="DELIMETER">:</span> <span class="NUMBER">30</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">direction</span><span class="DELIMETER">:</span> <span class="NUMBER">2</span> <span class="DELIMETER">}</span>
  <span class="DELIMETER">]</span><span class="DELIMETER">,</span>
  <span class="IDENTIFIER">food</span><span class="DELIMETER">:</span> <span class="DELIMETER">{</span> <span class="IDENTIFIER">x</span><span class="DELIMETER">:</span> <span class="NUMBER">0</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span><span class="DELIMETER">:</span> <span class="NUMBER">0</span> <span class="DELIMETER">}</span><span class="DELIMETER">,</span>
  <span class="IDENTIFIER">score</span><span class="DELIMETER">:</span> <span class="NUMBER">0</span>
<span class="DELIMETER">}</span><span class="DELIMETER">;</span>

<span class="COMMENT">/*   a*/</span>
<span class="KEYWORD">function</span> <span class="IDENTIFIER">generateFood</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
  <span class="KEYWORD">const</span> <span class="IDENTIFIER">snake</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">snake</span><span class="DELIMETER">;</span>
  <span class="KEYWORD">let</span> <span class="IDENTIFIER">x</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">Math</span><span class="DELIMETER">.</span><span class="IDENTIFIER">floor</span><span class="DELIMETER">(</span><span class="IDENTIFIER">Math</span><span class="DELIMETER">.</span><span class="IDENTIFIER">random</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span> <span class="OPERATOR">*</span> <span class="NUMBER">25</span><span class="DELIMETER">)</span> <span class="OPERATOR">*</span> <span class="NUMBER">10</span><span class="DELIMETER">;</span>
  <span class="KEYWORD">let</span> <span class="IDENTIFIER">y</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">Math</span><span class="DELIMETER">.</span><span class="IDENTIFIER">floor</span><span class="DELIMETER">(</span><span class="IDENTIFIER">Math</span><span class="DELIMETER">.</span><span class="IDENTIFIER">random</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span> <span class="OPERATOR">*</span> <span class="NUMBER">25</span><span class="DELIMETER">)</span> <span class="OPERATOR">*</span> <span class="NUMBER">10</span><span class="DELIMETER">;</span>

  <span class="KEYWORD">while</span> <span class="DELIMETER">(</span><span class="IDENTIFIER">snake</span><span class="DELIMETER">.</span><span class="IDENTIFIER">some</span><span class="DELIMETER">(</span><span class="IDENTIFIER">part</span> <span class="OPERATOR">=</span><span class="OPERATOR">></span> <span class="IDENTIFIER">part</span><span class="DELIMETER">.</span><span class="IDENTIFIER">x</span> <span class="OPERATOR">=</span><span class="OPERATOR">=</span><span class="OPERATOR">=</span> <span class="IDENTIFIER">x</span> <span class="OPERATOR">&</span><span class="OPERATOR">&</span> <span class="IDENTIFIER">part</span><span class="DELIMETER">.</span><span class="IDENTIFIER">y</span> <span class="OPERATOR">=</span><span class="OPERATOR">=</span><span class="OPERATOR">=</span> <span class="IDENTIFIER">y</span><span class="DELIMETER">)</span><span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
    <span class="IDENTIFIER">x</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">Math</span><span class="DELIMETER">.</span><span class="IDENTIFIER">floor</span><span class="DELIMETER">(</span><span class="IDENTIFIER">Math</span><span class="DELIMETER">.</span><span class="IDENTIFIER">random</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span> <span class="OPERATOR">*</span> <span class="NUMBER">25</span><span class="DELIMETER">)</span> <span class="OPERATOR">*</span> <span class="NUMBER">10</span><span class="DELIMETER">;</span>
    <span class="IDENTIFIER">y</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">Math</span><span class="DELIMETER">.</span><span class="IDENTIFIER">floor</span><span class="DELIMETER">(</span><span class="IDENTIFIER">Math</span><span class="DELIMETER">.</span><span class="IDENTIFIER">random</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span> <span class="OPERATOR">*</span> <span class="NUMBER">25</span><span class="DELIMETER">)</span> <span class="OPERATOR">*</span> <span class="NUMBER">10</span><span class="DELIMETER">;</span>
  <span class="DELIMETER">}</span>
  <span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">food</span> <span class="OPERATOR">=</span> <span class="DELIMETER">{</span> <span class="IDENTIFIER">x</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span> <span class="DELIMETER">}</span><span class="DELIMETER">;</span>
<span class="DELIMETER">}</span>

<span class="KEYWORD">function</span> <span class="IDENTIFIER">addPart</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
  <span class="KEYWORD">let</span> <span class="IDENTIFIER">snake</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">snake</span><span class="DELIMETER">;</span>
  <span class="KEYWORD">let</span> <span class="DELIMETER">{</span> <span class="IDENTIFIER">x</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">direction</span> <span class="DELIMETER">}</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">snake</span><span class="DELIMETER">[</span><span class="IDENTIFIER">snake</span><span class="DELIMETER">.</span><span class="IDENTIFIER">length</span> <span class="OPERATOR">-</span> <span class="NUMBER">1</span><span class="DELIMETER">]</span><span class="DELIMETER">;</span>
  <span class="KEYWORD">switch</span> <span class="DELIMETER">(</span><span class="IDENTIFIER">direction</span><span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
    <span class="KEYWORD">case</span> <span class="NUMBER">1</span><span class="DELIMETER">:</span>
      <span class="IDENTIFIER">y</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">mod</span><span class="DELIMETER">(</span><span class="NUMBER">250</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span> <span class="OPERATOR">-</span> <span class="NUMBER">10</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
      <span class="KEYWORD">break</span><span class="DELIMETER">;</span>
    <span class="KEYWORD">case</span> <span class="OPERATOR">-</span><span class="NUMBER">1</span><span class="DELIMETER">:</span>
      <span class="IDENTIFIER">y</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">mod</span><span class="DELIMETER">(</span><span class="NUMBER">250</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span> <span class="OPERATOR">+</span> <span class="NUMBER">10</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
      <span class="KEYWORD">break</span><span class="DELIMETER">;</span>
    <span class="KEYWORD">case</span> <span class="OPERATOR">-</span><span class="NUMBER">2</span><span class="DELIMETER">:</span>
      <span class="IDENTIFIER">x</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">mod</span><span class="DELIMETER">(</span><span class="NUMBER">250</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">x</span> <span class="OPERATOR">+</span> <span class="NUMBER">10</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
      <span class="KEYWORD">break</span><span class="DELIMETER">;</span>
    <span class="KEYWORD">case</span> <span class="NUMBER">2</span><span class="DELIMETER">:</span>
      <span class="IDENTIFIER">x</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">mod</span><span class="DELIMETER">(</span><span class="NUMBER">250</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">x</span> <span class="OPERATOR">-</span> <span class="NUMBER">10</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
      <span class="KEYWORD">break</span><span class="DELIMETER">;</span>
  <span class="DELIMETER">}</span>
  <span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">snake</span><span class="DELIMETER">.</span><span class="IDENTIFIER">push</span><span class="DELIMETER">(</span><span class="DELIMETER">{</span> <span class="IDENTIFIER">x</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">direction</span> <span class="DELIMETER">}</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
<span class="DELIMETER">}</span>

<span class="KEYWORD">function</span> <span class="IDENTIFIER">eatFood</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
  <span class="KEYWORD">let</span> <span class="DELIMETER">{</span> <span class="IDENTIFIER">x</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span> <span class="DELIMETER">}</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">snake</span><span class="DELIMETER">[</span><span class="NUMBER">0</span><span class="DELIMETER">]</span><span class="DELIMETER">;</span>
  <span class="KEYWORD">let</span> <span class="DELIMETER">{</span> <span class="IDENTIFIER">x</span><span class="DELIMETER">:</span> <span class="IDENTIFIER">fx</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span><span class="DELIMETER">:</span> <span class="IDENTIFIER">fy</span> <span class="DELIMETER">}</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">food</span><span class="DELIMETER">;</span>

  <span class="KEYWORD">if</span> <span class="DELIMETER">(</span><span class="IDENTIFIER">x</span> <span class="OPERATOR">=</span><span class="OPERATOR">=</span> <span class="IDENTIFIER">fx</span> <span class="OPERATOR">&</span><span class="OPERATOR">&</span> <span class="IDENTIFIER">y</span> <span class="OPERATOR">=</span><span class="OPERATOR">=</span> <span class="IDENTIFIER">fy</span><span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
    <span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">score</span><span class="OPERATOR">+</span><span class="OPERATOR">+</span><span class="DELIMETER">;</span>
    <span class="IDENTIFIER">score</span><span class="DELIMETER">.</span><span class="IDENTIFIER">innerHTML</span> <span class="OPERATOR">=</span> <span class="STRING">"Score: "</span> <span class="OPERATOR">+</span> <span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">score</span><span class="DELIMETER">;</span>
    <span class="IDENTIFIER">addPart</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
    <span class="IDENTIFIER">generateFood</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
  <span class="DELIMETER">}</span>
<span class="DELIMETER">}</span>
<span class="KEYWORD">function</span> <span class="IDENTIFIER">checkGameOver</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
  <span class="KEYWORD">const</span> <span class="IDENTIFIER">head</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">snake</span><span class="DELIMETER">[</span><span class="NUMBER">0</span><span class="DELIMETER">]</span><span class="DELIMETER">;</span>
  <span class="KEYWORD">return</span> <span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">snake</span><span class="DELIMETER">.</span><span class="IDENTIFIER">some</span><span class="DELIMETER">(</span>
    <span class="DELIMETER">(</span><span class="IDENTIFIER">part</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">i</span><span class="DELIMETER">)</span> <span class="OPERATOR">=</span><span class="OPERATOR">></span> <span class="IDENTIFIER">i</span> <span class="OPERATOR">!</span><span class="OPERATOR">=</span><span class="OPERATOR">=</span> <span class="NUMBER">0</span> <span class="OPERATOR">&</span><span class="OPERATOR">&</span> <span class="IDENTIFIER">head</span><span class="DELIMETER">.</span><span class="IDENTIFIER">x</span> <span class="OPERATOR">=</span><span class="OPERATOR">=</span><span class="OPERATOR">=</span> <span class="IDENTIFIER">part</span><span class="DELIMETER">.</span><span class="IDENTIFIER">x</span> <span class="OPERATOR">&</span><span class="OPERATOR">&</span> <span class="IDENTIFIER">head</span><span class="DELIMETER">.</span><span class="IDENTIFIER">y</span> <span class="OPERATOR">=</span><span class="OPERATOR">=</span><span class="OPERATOR">=</span> <span class="IDENTIFIER">part</span><span class="DELIMETER">.</span><span class="IDENTIFIER">y</span>
  <span class="DELIMETER">)</span><span class="DELIMETER">;</span>
<span class="DELIMETER">}</span>

<span class="IDENTIFIER">document</span><span class="DELIMETER">.</span><span class="IDENTIFIER">addEventListener</span><span class="DELIMETER">(</span><span class="STRING">"keydown"</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">event</span> <span class="OPERATOR">=</span><span class="OPERATOR">></span> <span class="DELIMETER">{</span>
  <span class="KEYWORD">if</span> <span class="DELIMETER">(</span> <span class="UNDEF"></span><span class="IDENTIFIER">Arrow</span> <span class="UNDEF"></span><span class="IDENTIFIER">gi</span><span class="DELIMETER">.</span><span class="IDENTIFIER">test</span><span class="DELIMETER">(</span><span class="IDENTIFIER">event</span><span class="DELIMETER">.</span><span class="IDENTIFIER">key</span><span class="DELIMETER">)</span><span class="DELIMETER">)</span> <span class="IDENTIFIER">event</span><span class="DELIMETER">.</span><span class="IDENTIFIER">preventDefault</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
  <span class="KEYWORD">let</span> <span class="IDENTIFIER">direction</span> <span class="OPERATOR">=</span> <span class="NUMBER">0</span><span class="DELIMETER">;</span>
  <span class="KEYWORD">switch</span> <span class="DELIMETER">(</span><span class="IDENTIFIER">event</span><span class="DELIMETER">.</span><span class="IDENTIFIER">key</span><span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
    <span class="KEYWORD">case</span> <span class="STRING">"ArrowDown"</span><span class="DELIMETER">:</span>
      <span class="IDENTIFIER">direction</span> <span class="OPERATOR">=</span> <span class="NUMBER">1</span><span class="DELIMETER">;</span>
      <span class="KEYWORD">break</span><span class="DELIMETER">;</span>
    <span class="KEYWORD">case</span> <span class="STRING">"ArrowUp"</span><span class="DELIMETER">:</span>
      <span class="IDENTIFIER">direction</span> <span class="OPERATOR">=</span> <span class="OPERATOR">-</span><span class="NUMBER">1</span><span class="DELIMETER">;</span>
      <span class="KEYWORD">break</span><span class="DELIMETER">;</span>
    <span class="KEYWORD">case</span> <span class="STRING">"ArrowLeft"</span><span class="DELIMETER">:</span>
      <span class="IDENTIFIER">direction</span> <span class="OPERATOR">=</span> <span class="OPERATOR">-</span><span class="NUMBER">2</span><span class="DELIMETER">;</span>
      <span class="KEYWORD">break</span><span class="DELIMETER">;</span>
    <span class="KEYWORD">case</span> <span class="STRING">"ArrowRight"</span><span class="DELIMETER">:</span>
      <span class="IDENTIFIER">direction</span> <span class="OPERATOR">=</span> <span class="NUMBER">2</span><span class="DELIMETER">;</span>
      <span class="KEYWORD">break</span><span class="DELIMETER">;</span>
  <span class="DELIMETER">}</span>
  <span class="KEYWORD">if</span> <span class="DELIMETER">(</span>
    <span class="IDENTIFIER">direction</span> <span class="OPERATOR">&</span><span class="OPERATOR">&</span>
    <span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">direction</span> <span class="OPERATOR">=</span><span class="OPERATOR">=</span> <span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">snake</span><span class="DELIMETER">[</span><span class="NUMBER">0</span><span class="DELIMETER">]</span><span class="DELIMETER">.</span><span class="IDENTIFIER">direction</span> <span class="OPERATOR">&</span><span class="OPERATOR">&</span>
    <span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">direction</span> <span class="OPERATOR">!</span><span class="OPERATOR">=</span> <span class="OPERATOR">-</span><span class="IDENTIFIER">direction</span>
  <span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
    <span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">direction</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">direction</span><span class="DELIMETER">;</span>
  <span class="DELIMETER">}</span>
<span class="DELIMETER">}</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>

<span class="KEYWORD">function</span> <span class="IDENTIFIER">drawSnakePart</span><span class="DELIMETER">(</span><span class="IDENTIFIER">x</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">head</span> <span class="OPERATOR">=</span> <span class="KEYWORD">false</span><span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
  <span class="IDENTIFIER">ctx</span><span class="DELIMETER">.</span><span class="IDENTIFIER">fillStyle</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">head</span> <span class="OPERATOR">?</span> <span class="STRING">"green"</span> <span class="DELIMETER">:</span> <span class="STRING">"white"</span><span class="DELIMETER">;</span>
  <span class="IDENTIFIER">ctx</span><span class="DELIMETER">.</span><span class="IDENTIFIER">fillRect</span><span class="DELIMETER">(</span><span class="IDENTIFIER">x</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span><span class="DELIMETER">,</span> <span class="NUMBER">10</span><span class="DELIMETER">,</span> <span class="NUMBER">10</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
<span class="DELIMETER">}</span>
<span class="KEYWORD">function</span> <span class="IDENTIFIER">drawSnake</span><span class="DELIMETER">(</span><span class="IDENTIFIER">snake</span><span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
  <span class="KEYWORD">for</span> <span class="DELIMETER">(</span><span class="KEYWORD">let</span> <span class="IDENTIFIER">i</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">snake</span><span class="DELIMETER">.</span><span class="IDENTIFIER">length</span> <span class="OPERATOR">-</span> <span class="NUMBER">1</span><span class="DELIMETER">;</span> <span class="IDENTIFIER">i</span> <span class="OPERATOR">></span><span class="OPERATOR">=</span> <span class="NUMBER">0</span><span class="DELIMETER">;</span> <span class="OPERATOR">-</span><span class="OPERATOR">-</span><span class="IDENTIFIER">i</span><span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
    <span class="IDENTIFIER">drawSnakePart</span><span class="DELIMETER">(</span><span class="IDENTIFIER">snake</span><span class="DELIMETER">[</span><span class="IDENTIFIER">i</span><span class="DELIMETER">]</span><span class="DELIMETER">.</span><span class="IDENTIFIER">x</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">snake</span><span class="DELIMETER">[</span><span class="IDENTIFIER">i</span><span class="DELIMETER">]</span><span class="DELIMETER">.</span><span class="IDENTIFIER">y</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">i</span> <span class="OPERATOR">=</span><span class="OPERATOR">=</span><span class="OPERATOR">=</span> <span class="NUMBER">0</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
  <span class="DELIMETER">}</span>
<span class="DELIMETER">}</span>
<span class="KEYWORD">function</span> <span class="IDENTIFIER">drawFood</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
  <span class="KEYWORD">let</span> <span class="IDENTIFIER">x</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">food</span><span class="DELIMETER">.</span><span class="IDENTIFIER">x</span><span class="DELIMETER">;</span>
  <span class="KEYWORD">let</span> <span class="IDENTIFIER">y</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">food</span><span class="DELIMETER">.</span><span class="IDENTIFIER">y</span><span class="DELIMETER">;</span>
  <span class="IDENTIFIER">ctx</span><span class="DELIMETER">.</span><span class="IDENTIFIER">beginPath</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
  <span class="IDENTIFIER">ctx</span><span class="DELIMETER">.</span><span class="IDENTIFIER">fillStyle</span> <span class="OPERATOR">=</span> <span class="STRING">"red"</span><span class="DELIMETER">;</span>
  <span class="IDENTIFIER">ctx</span><span class="DELIMETER">.</span><span class="IDENTIFIER">arc</span><span class="DELIMETER">(</span><span class="IDENTIFIER">x</span> <span class="OPERATOR">+</span> <span class="NUMBER">5</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span> <span class="OPERATOR">+</span> <span class="NUMBER">5</span><span class="DELIMETER">,</span> <span class="NUMBER">5</span><span class="DELIMETER">,</span> <span class="NUMBER">0</span><span class="DELIMETER">,</span> <span class="NUMBER">2</span> <span class="OPERATOR">*</span> <span class="IDENTIFIER">Math</span><span class="DELIMETER">.</span><span class="IDENTIFIER">PI</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
  <span class="IDENTIFIER">ctx</span><span class="DELIMETER">.</span><span class="IDENTIFIER">stroke</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
  <span class="IDENTIFIER">ctx</span><span class="DELIMETER">.</span><span class="IDENTIFIER">fill</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
<span class="DELIMETER">}</span>
<span class="KEYWORD">function</span> <span class="IDENTIFIER">drawBackground</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
  <span class="IDENTIFIER">ctx</span><span class="DELIMETER">.</span><span class="IDENTIFIER">fillStyle</span> <span class="OPERATOR">=</span> <span class="STRING">"tan"</span><span class="DELIMETER">;</span>
  <span class="IDENTIFIER">ctx</span><span class="DELIMETER">.</span><span class="IDENTIFIER">fillRect</span><span class="DELIMETER">(</span><span class="NUMBER">0</span><span class="DELIMETER">,</span> <span class="NUMBER">0</span><span class="DELIMETER">,</span> <span class="NUMBER">250</span><span class="DELIMETER">,</span> <span class="NUMBER">250</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
<span class="DELIMETER">}</span>

<span class="KEYWORD">var</span> <span class="IDENTIFIER">start</span> <span class="OPERATOR">=</span> <span class="NUMBER">0</span><span class="DELIMETER">;</span>
<span class="KEYWORD">function</span> <span class="IDENTIFIER">draw</span><span class="DELIMETER">(</span><span class="IDENTIFIER">timestamp</span><span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
  <span class="IDENTIFIER">start</span><span class="OPERATOR">+</span><span class="OPERATOR">+</span><span class="DELIMETER">;</span>
  <span class="KEYWORD">if</span> <span class="DELIMETER">(</span><span class="IDENTIFIER">timestamp</span> <span class="OPERATOR">-</span> <span class="IDENTIFIER">start</span> <span class="OPERATOR">></span> <span class="NUMBER">1000</span>  <span class="UNDEF"></span> <span class="NUMBER">10</span><span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
    <span class="KEYWORD">if</span> <span class="DELIMETER">(</span><span class="IDENTIFIER">checkGameOver</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span><span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
      <span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">gameover</span> <span class="OPERATOR">=</span> <span class="KEYWORD">true</span><span class="DELIMETER">;</span>
      <span class="KEYWORD">return</span><span class="DELIMETER">;</span>
    <span class="DELIMETER">}</span>
    <span class="KEYWORD">let</span> <span class="IDENTIFIER">snake</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">snake</span><span class="DELIMETER">;</span>
    <span class="KEYWORD">let</span> <span class="IDENTIFIER">direction</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">direction</span><span class="DELIMETER">;</span>
    <span class="KEYWORD">let</span> <span class="IDENTIFIER">x</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">snake</span><span class="DELIMETER">[</span><span class="NUMBER">0</span><span class="DELIMETER">]</span><span class="DELIMETER">.</span><span class="IDENTIFIER">x</span><span class="DELIMETER">;</span>
    <span class="KEYWORD">let</span> <span class="IDENTIFIER">y</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">snake</span><span class="DELIMETER">[</span><span class="NUMBER">0</span><span class="DELIMETER">]</span><span class="DELIMETER">.</span><span class="IDENTIFIER">y</span><span class="DELIMETER">;</span>
    <span class="KEYWORD">switch</span> <span class="DELIMETER">(</span><span class="IDENTIFIER">direction</span><span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
      <span class="KEYWORD">case</span> <span class="NUMBER">1</span><span class="DELIMETER">:</span>
        <span class="IDENTIFIER">y</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">mod</span><span class="DELIMETER">(</span><span class="NUMBER">250</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span> <span class="OPERATOR">+</span> <span class="NUMBER">10</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
        <span class="KEYWORD">break</span><span class="DELIMETER">;</span>
      <span class="KEYWORD">case</span> <span class="OPERATOR">-</span><span class="NUMBER">1</span><span class="DELIMETER">:</span>
        <span class="IDENTIFIER">y</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">mod</span><span class="DELIMETER">(</span><span class="NUMBER">250</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span> <span class="OPERATOR">-</span> <span class="NUMBER">10</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
        <span class="KEYWORD">break</span><span class="DELIMETER">;</span>
      <span class="KEYWORD">case</span> <span class="OPERATOR">-</span><span class="NUMBER">2</span><span class="DELIMETER">:</span>
        <span class="IDENTIFIER">x</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">mod</span><span class="DELIMETER">(</span><span class="NUMBER">250</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">x</span> <span class="OPERATOR">-</span> <span class="NUMBER">10</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
        <span class="KEYWORD">break</span><span class="DELIMETER">;</span>
      <span class="KEYWORD">case</span> <span class="NUMBER">2</span><span class="DELIMETER">:</span>
        <span class="IDENTIFIER">x</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">mod</span><span class="DELIMETER">(</span><span class="NUMBER">250</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">x</span> <span class="OPERATOR">+</span> <span class="NUMBER">10</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
        <span class="KEYWORD">break</span><span class="DELIMETER">;</span>
    <span class="DELIMETER">}</span>
    <span class="KEYWORD">const</span> <span class="IDENTIFIER">newSnake</span> <span class="OPERATOR">=</span> <span class="DELIMETER">[</span><span class="DELIMETER">{</span> <span class="IDENTIFIER">x</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">direction</span> <span class="DELIMETER">}</span><span class="DELIMETER">]</span><span class="DELIMETER">;</span>
    <span class="KEYWORD">const</span> <span class="IDENTIFIER">snakeLength</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">snake</span><span class="DELIMETER">.</span><span class="IDENTIFIER">length</span><span class="DELIMETER">;</span>
    <span class="KEYWORD">for</span> <span class="DELIMETER">(</span><span class="KEYWORD">let</span> <span class="IDENTIFIER">i</span> <span class="OPERATOR">=</span> <span class="NUMBER">1</span><span class="DELIMETER">;</span> <span class="IDENTIFIER">i</span> <span class="OPERATOR"><</span> <span class="IDENTIFIER">snakeLength</span><span class="DELIMETER">;</span> <span class="OPERATOR">+</span><span class="OPERATOR">+</span><span class="IDENTIFIER">i</span><span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
      <span class="IDENTIFIER">newSnake</span><span class="DELIMETER">.</span><span class="IDENTIFIER">push</span><span class="DELIMETER">(</span><span class="DELIMETER">{</span> <span class="DELIMETER">.</span><span class="DELIMETER">.</span><span class="DELIMETER">.</span><span class="IDENTIFIER">snake</span><span class="DELIMETER">[</span><span class="IDENTIFIER">i</span> <span class="OPERATOR">-</span> <span class="NUMBER">1</span><span class="DELIMETER">]</span> <span class="DELIMETER">}</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
    <span class="DELIMETER">}</span>
    <span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">snake</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">newSnake</span><span class="DELIMETER">;</span>
    <span class="IDENTIFIER">drawBackground</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
    <span class="IDENTIFIER">drawFood</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
    <span class="IDENTIFIER">drawSnake</span><span class="DELIMETER">(</span><span class="IDENTIFIER">newSnake</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
    <span class="IDENTIFIER">eatFood</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
    <span class="IDENTIFIER">start</span> <span class="OPERATOR">=</span> <span class="IDENTIFIER">timestamp</span><span class="DELIMETER">;</span>
  <span class="DELIMETER">}</span>
  <span class="KEYWORD">if</span> <span class="DELIMETER">(</span><span class="OPERATOR">!</span><span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">gameover</span><span class="DELIMETER">)</span> <span class="IDENTIFIER">window</span><span class="DELIMETER">.</span><span class="IDENTIFIER">requestAnimationFrame</span><span class="DELIMETER">(</span><span class="IDENTIFIER">draw</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
<span class="DELIMETER">}</span>

<span class="IDENTIFIER">play</span><span class="DELIMETER">.</span><span class="IDENTIFIER">onclick</span> <span class="OPERATOR">=</span> <span class="DELIMETER">(</span><span class="DELIMETER">)</span> <span class="OPERATOR">=</span><span class="OPERATOR">></span> <span class="DELIMETER">{</span>
  <span class="KEYWORD">if</span> <span class="DELIMETER">(</span><span class="IDENTIFIER">state</span><span class="DELIMETER">.</span><span class="IDENTIFIER">gameover</span><span class="DELIMETER">)</span> <span class="DELIMETER">{</span>
    <span class="IDENTIFIER">state</span> <span class="OPERATOR">=</span> <span class="DELIMETER">{</span>
      <span class="IDENTIFIER">gameover</span><span class="DELIMETER">:</span> <span class="KEYWORD">false</span><span class="DELIMETER">,</span>
      <span class="IDENTIFIER">direction</span><span class="DELIMETER">:</span> <span class="NUMBER">2</span><span class="DELIMETER">,</span>
      <span class="IDENTIFIER">snake</span><span class="DELIMETER">:</span> <span class="DELIMETER">[</span>
        <span class="DELIMETER">{</span> <span class="IDENTIFIER">x</span><span class="DELIMETER">:</span> <span class="NUMBER">10</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span><span class="DELIMETER">:</span> <span class="NUMBER">10</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">direction</span><span class="DELIMETER">:</span> <span class="NUMBER">2</span> <span class="DELIMETER">}</span><span class="DELIMETER">,</span>
        <span class="DELIMETER">{</span> <span class="IDENTIFIER">x</span><span class="DELIMETER">:</span> <span class="NUMBER">10</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span><span class="DELIMETER">:</span> <span class="NUMBER">20</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">direction</span><span class="DELIMETER">:</span> <span class="NUMBER">2</span> <span class="DELIMETER">}</span><span class="DELIMETER">,</span>
        <span class="DELIMETER">{</span> <span class="IDENTIFIER">x</span><span class="DELIMETER">:</span> <span class="NUMBER">10</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span><span class="DELIMETER">:</span> <span class="NUMBER">30</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">direction</span><span class="DELIMETER">:</span> <span class="NUMBER">2</span> <span class="DELIMETER">}</span>
      <span class="DELIMETER">]</span><span class="DELIMETER">,</span>
      <span class="IDENTIFIER">food</span><span class="DELIMETER">:</span> <span class="DELIMETER">{</span> <span class="IDENTIFIER">x</span><span class="DELIMETER">:</span> <span class="NUMBER">0</span><span class="DELIMETER">,</span> <span class="IDENTIFIER">y</span><span class="DELIMETER">:</span> <span class="NUMBER">0</span> <span class="DELIMETER">}</span><span class="DELIMETER">,</span>
      <span class="IDENTIFIER">score</span><span class="DELIMETER">:</span> <span class="NUMBER">0</span>
    <span class="DELIMETER">}</span><span class="DELIMETER">;</span>
    <span class="IDENTIFIER">score</span><span class="DELIMETER">.</span><span class="IDENTIFIER">innerHTML</span> <span class="OPERATOR">=</span> <span class="STRING">"Score: "</span> <span class="OPERATOR">+</span> <span class="NUMBER">0</span><span class="DELIMETER">;</span>
    <span class="IDENTIFIER">generateFood</span><span class="DELIMETER">(</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
    <span class="IDENTIFIER">window</span><span class="DELIMETER">.</span><span class="IDENTIFIER">requestAnimationFrame</span><span class="DELIMETER">(</span><span class="IDENTIFIER">draw</span><span class="DELIMETER">)</span><span class="DELIMETER">;</span>
  <span class="DELIMETER">}</span>
<span class="DELIMETER">}</span><span class="DELIMETER">;</span></pre></div>